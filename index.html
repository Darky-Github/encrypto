<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Encrypto</title>
<style>
body {
    font-family: "Segoe UI", sans-serif;
    margin: 0;
    padding: 0;
    background-color: #121212;
    color: #fff;
    transition: background-color 0.3s, color 0.3s;
}
body.light-mode {
    background-color: #f0f0f0;
    color: #222;
}
.container {
    max-width: 600px;
    margin: auto;
    padding: 20px;
}
h1 {
    text-align: center;
    margin-bottom: 20px;
    color: #4fc3f7;
}
textarea {
    width: 100%;
    height: 150px;
    padding: 10px;
    margin-bottom: 10px;
    border-radius: 8px;
    border: none;
    resize: none;
    font-size: 1em;
    font-family: inherit;
}
select, button {
    padding: 10px;
    margin: 5px 0;
    border-radius: 8px;
    border: none;
    font-size: 1em;
    font-family: inherit;
}
button {
    cursor: pointer;
    background-color: #4fc3f7;
    color: #fff;
    transition: background-color 0.3s;
}
button:hover {
    background-color: #29b6f6;
}
.flex-row {
    display: flex;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 10px;
}
.flex-row select, .flex-row button {
    flex: 1 1 48%;
}
.mode-toggle {
    background-color: #fbc02d;
    color: #000;
}
.mode-toggle:hover {
    background-color: #fdd835;
}
</style>
</head>
<body>
<div class="container">
    <h1>Encrypto</h1>
    <textarea id="inputText" placeholder="Enter your text here..."></textarea>
    <div class="flex-row">
        <select id="methodSelect">
            <option value="rot13">ROT13</option>
            <option value="base64">Base64</option>
            <option value="caesar">Caesar Cipher</option>
            <option value="aes">AES</option>
            <option value="custom">Custom</option>
        </select>
        <input type="text" id="keyInput" placeholder="Key / Shift (optional)" />
    </div>
    <div class="flex-row">
        <button id="encryptBtn">Encrypt</button>
        <button id="decryptBtn">Decrypt</button>
    </div>
    <textarea id="outputText" placeholder="Output will appear here..." readonly></textarea>
    <button id="modeToggle" class="mode-toggle">Toggle Light/Dark Mode</button>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
<script>
const encryptBtn = document.getElementById('encryptBtn');
const decryptBtn = document.getElementById('decryptBtn');
const inputText = document.getElementById('inputText');
const outputText = document.getElementById('outputText');
const methodSelect = document.getElementById('methodSelect');
const keyInput = document.getElementById('keyInput');
const modeToggle = document.getElementById('modeToggle');
const body = document.body;

function rot13(text) {
    return text.replace(/[a-zA-Z]/g, c =>
        String.fromCharCode(c.charCodeAt(0) + (c.toLowerCase() < 'n' ? 13 : -13))
    );
}

function caesarEncrypt(text, shift) {
    return text.replace(/[a-zA-Z]/g, c => {
        const base = c <= 'Z' ? 65 : 97;
        return String.fromCharCode(((c.charCodeAt(0) - base + shift) % 26) + base);
    });
}

function caesarDecrypt(text, shift) {
    return caesarEncrypt(text, (26 - shift) % 26);
}

function aesEncrypt(text, key) {
    return CryptoJS.AES.encrypt(text, key).toString();
}

function aesDecrypt(ciphertext, key) {
    try {
        return CryptoJS.AES.decrypt(ciphertext, key).toString(CryptoJS.enc.Utf8);
    } catch {
        return "Invalid AES key or ciphertext";
    }
}

function base64Encrypt(text) {
    return btoa(text);
}

function base64Decrypt(text) {
    try {
        return atob(text);
    } catch {
        return "Invalid Base64 input";
    }
}

function encrypt(text) {
    const method = methodSelect.value;
    const key = keyInput.value;
    if(method === "rot13") return rot13(text);
    if(method === "base64") return base64Encrypt(text);
    if(method === "caesar") return caesarEncrypt(text, parseInt(key)||3);
    if(method === "aes") return aesEncrypt(text, key||"secret");
    if(method === "custom") {
        try {
            const def = JSON.parse(text); // Example: {"shift":3,"method":"caesar"}
            if(def.method==="caesar") return caesarEncrypt(def.text, def.shift||3);
            if(def.method==="rot13") return rot13(def.text);
            if(def.method==="base64") return base64Encrypt(def.text);
            if(def.method==="aes") return aesEncrypt(def.text, def.key||"secret");
            return "Custom method not recognized";
        } catch {
            return "Invalid custom method definition";
        }
    }
    return text;
}

function decrypt(text) {
    const method = methodSelect.value;
    const key = keyInput.value;
    if(method === "rot13") return rot13(text);
    if(method === "base64") return base64Decrypt(text);
    if(method === "caesar") return caesarDecrypt(text, parseInt(key)||3);
    if(method === "aes") return aesDecrypt(text, key||"secret");
    if(method === "custom") {
        try {
            const def = JSON.parse(text);
            if(def.method==="caesar") return caesarDecrypt(def.text, def.shift||3);
            if(def.method==="rot13") return rot13(def.text);
            if(def.method==="base64") return base64Decrypt(def.text);
            if(def.method==="aes") return aesDecrypt(def.text, def.key||"secret");
            return "Custom method not recognized";
        } catch {
            return "Invalid custom method definition";
        }
    }
    return text;
}

encryptBtn.addEventListener('click', () => {
    outputText.value = encrypt(inputText.value);
});

decryptBtn.addEventListener('click', () => {
    outputText.value = decrypt(inputText.value);
});

modeToggle.addEventListener('click', () => {
    body.classList.toggle('light-mode');
});
</script>
</body>
</html>
